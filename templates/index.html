<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TALE Finder</title>
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png">
</head>
<body>
    <h1>TALE Finder</h1>
    <p>Find TALE binding sites in DNA sequences</p>
    <hr>

    <h2>Search Options</h2>
    <form action="/search" method="POST" enctype="multipart/form-data">

        <fieldset>
            <legend>DNA Input</legend>

            <p>
                <label for="input_method">Input Method:</label><br>
                <select name="input_method" id="input_method">
                    <option value="paste">Paste Sequence</option>
                    <option value="file">Upload File (.fasta, .gb, .dna)</option>
                    <option value="ncbi">Fetch from NCBI</option>
                </select>
            </p>

            <div id="paste_input">
                <p>
                    <label for="dna_sequence">DNA Sequence (A, T, C, G only):</label><br>
                    <textarea name="dna_sequence" id="dna_sequence" rows="8" cols="80"
                              placeholder="Enter DNA sequence here..."></textarea>
                </p>
            </div>

            <div id="file_input">
                <p>
                    <label for="dna_file">Upload DNA File:</label><br>
                    <input type="file" name="dna_file" id="dna_file"
                           accept=".fasta,.fa,.fna,.gb,.gbk,.genbank,.dna">
                </p>
                <p><small>Supported formats: FASTA (.fasta, .fa, .fna), GenBank (.gb, .gbk), SnapGene (.dna)</small></p>
            </div>

            <div id="ncbi_input">
                <p>
                    <label for="ncbi_accession">NCBI Accession Number:</label><br>
                    <input type="text" name="ncbi_accession" id="ncbi_accession"
                           placeholder="e.g., NM_001301717, NC_000001, NG_007400" size="40">
                </p>
                <p><small>Enter a GenBank, RefSeq, or Gene accession number</small></p>
            </div>
        </fieldset>

        <fieldset>
            <legend>Search Mode</legend>

            <p>
                <label for="search_mode">Search For:</label><br>
                <select name="search_mode" id="search_mode">
                    <option value="pairs">TALE Pairs (for TALEN)</option>
                    <option value="single">Single TALEs</option>
                </select>
            </p>

            <p>
                <label for="orientation">Orientation:</label><br>
                <select name="orientation" id="orientation">
                    <option value="any">Any Orientation</option>
                    <option value="forward">Forward Strand Only</option>
                    <option value="reverse">Reverse Strand Only</option>
                    <option value="convergent">Convergent Pairs (standard TALEN)</option>
                    <option value="divergent">Divergent Pairs</option>
                </select>
            </p>
        </fieldset>

        <fieldset>
            <legend>TALE Parameters</legend>

            <p>
                <label for="min_tale_length">Min TALE Length:</label>
                <input type="number" name="min_tale_length" id="min_tale_length"
                       value="15" min="10" max="30" size="5">

                <label for="max_tale_length">Max TALE Length:</label>
                <input type="number" name="max_tale_length" id="max_tale_length"
                       value="20" min="10" max="30" size="5">
            </p>

            <p>
                <label for="min_spacer_length">Min Spacer Length:</label>
                <input type="number" name="min_spacer_length" id="min_spacer_length"
                       value="14" min="1" max="100" size="5">

                <label for="max_spacer_length">Max Spacer Length:</label>
                <input type="number" name="max_spacer_length" id="max_spacer_length"
                       value="20" min="1" max="100" size="5">
            </p>
        </fieldset>

        <fieldset>
            <legend>Advanced Options</legend>

            <p>
                <label for="g_code">Guanine Recognition:</label>
                <select name="g_code" id="g_code">
                    <option value="NH">NH (more specific)</option>
                    <option value="NN">NN (stronger binding)</option>
                </select>
            </p>

            <p>
                <label for="position">Target Position (optional):</label>
                <input type="number" name="position" id="position" min="0" size="10">

                <label for="position_range">Range (+/-):</label>
                <input type="number" name="position_range" id="position_range" min="0" size="10">
            </p>

            <p>
                <input type="checkbox" name="skip_cpg" id="skip_cpg" checked>
                <label for="skip_cpg">Skip CpG islands</label>
            </p>

            <p>
                <input type="checkbox" name="skip_consecutive_at" id="skip_consecutive_at" checked>
                <label for="skip_consecutive_at">Skip sequences with 7+ consecutive A/T</label>
            </p>

            <p>
                <label for="min_gc">Minimum GC Content (%):</label>
                <input type="number" name="min_gc" id="min_gc" value="25" min="0" max="100" size="5">
            </p>
        </fieldset>

        <p>
            <button type="submit">Find TALEs</button>
            <button type="reset">Reset</button>
        </p>
    </form>

    <hr>
    <p><a href="/about">About TALE Finder</a> | <a href="/help">Help</a></p>
</body>
</html>
